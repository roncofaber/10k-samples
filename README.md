# nirvana10k

**Analysis of UV-Vis spectroscopy data from Nirvana tool measurements**

`nirvana10k` is a Python package designed for processing and analyzing UV-Visible spectroscopy data from HDF5 files generated by the Nirvana instrument. It provides tools for reading multi-position spectroscopy measurements, calculating sample inhomogeneity, and visualizing spectral data.

## Features

- üìÅ **HDF5 Data Reading**: Import spectroscopy data from Nirvana instrument HDF5 files
- üìä **Data Analysis**: Calculate inhomogeneity metrics across multiple measurement spots
- üéØ **Wavelength Filtering**: Focus analysis on specific wavelength ranges
- üìà **Visualization**: Generate publication-ready plots with customizable styling
- üîß **Modular Design**: Clean, extensible architecture for spectroscopy analysis

## Installation

### From Source (Development)

```bash
# Clone the repository
git clone https://github.com/roncofaber/nirvana10k.git
cd nirvana10k

# Install in development mode
pip install -e .
```

### Requirements

- Python ‚â• 3.8
- h5py ‚â• 3.7.0
- numpy ‚â• 1.21.0
- scipy ‚â• 1.7.0
- matplotlib ‚â• 3.5.0
- seaborn ‚â• 0.11.0

## Quick Start

```python
from nirvana10k import h5_to_samples

# Load samples from HDF5 file
samples = h5_to_samples("your_data.h5", erange=[380, 600])

# Analyze first sample
sample = samples[0]

# Calculate inhomogeneity
inhomogeneity = sample.get_inhomogenity(spots=[0, 1, 2])
print(f"Mean inhomogeneity: {inhomogeneity.mean():.3f}")

# Plot the sample
sample.plot_sample(spots=[0, 1, 2], smooth=True)
```

## Usage Examples

### Basic Data Loading and Analysis

```python
from nirvana10k import h5_to_samples
import numpy as np

# Load spectroscopy data with wavelength filtering
samples = h5_to_samples("measurement_data.h5", erange=[380, 600])

print(f"Loaded {len(samples)} samples")
print(f"Sample 0 has {samples[0].nspots} measurement spots")

# Access wavelengths and absorbance data
wavelengths = samples[0].wavelengths
absorbances = samples[0].absorbances  # Shape: (n_spots, n_wavelengths)
```

### Inhomogeneity Analysis

```python
# Calculate inhomogeneity for specific spots
spots_to_analyze = [0, 1, 2]
inhomogeneity = samples[0].get_inhomogenity(spots=spots_to_analyze)

# Calculate statistics across all samples
mean_values = [sample.get_inhomogenity(spots=spots_to_analyze).mean()
               for sample in samples]
std_values = [sample.get_inhomogenity(spots=spots_to_analyze).std()
              for sample in samples]

print(f"Overall mean inhomogeneity: {np.mean(mean_values):.3f}")
```

### Data Visualization

```python
# Plot individual sample
samples[0].plot_sample(spots=[0, 1, 2], smooth=True)

# Plot all spots for a sample
samples[0].plot_sample()  # Uses all available spots

# Plot with custom wavelength range
samples[0].set_erange([400, 550])
samples[0].plot_sample()
```
